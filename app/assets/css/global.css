@import 'tailwindcss';

@plugin '@tailwindcss/container-queries';
@plugin '@tailwindcss/forms';
@plugin '@tailwindcss/typography';
@plugin '@headlessui/tailwindcss' {
  prefix: 'ui';
}

@custom-variant dark (&:where(.dark, .dark *));

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@theme {
  --breakpoint-*: initial;
  --breakpoint-xs: 420px;
  --breakpoint-sm: 640px;
  --breakpoint-md: 768px;
  --breakpoint-lg: 1024px;
  --breakpoint-xl: 1280px;
  --breakpoint-2xl: 1536px;

  --color-primary: hsl(10 75% 57%);
  --color-accent: hsl(43 71% 66%);

  --color-sakura: hsl(330 82% 60%);
  --color-sakura-light: hsl(330 87% 82%);
  --color-sakura-dark: hsl(328 77% 42%);

  --color-background: hsl(45 67% 97%);
  --color-surface: hsl(50 40% 94%);
  --color-border: hsl(50 30% 76%);

  --color-text: hsl(10 7% 15%);
  --color-text-secondary: hsl(35 13% 32%);

  --color-hanafuda-red: hsl(10 75% 57%);
  --color-hanafuda-gold: hsl(43 71% 66%);
  --color-hanafuda-cream: hsl(45 67% 97%);
  --color-hanafuda-brown: hsl(30 7% 51%);
  --color-hanafuda-purple: hsl(270 35% 56%);
  --color-hanafuda-green: hsl(150 30% 56%);

  --animate-stamp: stamp 0.3s ease-in;

  @keyframes stamp {
    from {
      opacity: 0;
      scale: 2;
    }

    75% {
      scale: 1.75;
      opacity: 0.25;
    }

    to {
      opacity: 1;
      scale: 1;
    }
  }

  --animate-fade-in-up: fadeInUp 1500ms ease-in-out forwards;
  @keyframes fadeInUp {
    from {
      opacity: 0;
      translate: 0 -20%;
    }
    to {
      opacity: 1;
      translate: 0 -60%;
    }
  }
}

@utility card {
  padding: 0;
  border-radius: var(--card-radius);
  border: var(--card-border-w) solid var(--card-border-color);
  height: var(--card-height);
  aspect-ratio: var(--card-aspect);

  &.down {
    background: var(--card-bg-color);
    background-size: cover;
  }
}

@utility down {
  &.card {
    background: var(--card-bg-color);
    background-size: cover;
  }
}

@utility pri-btn {
  @apply relative rounded-xs inline-flex justify-center items-center px-4 py-2 font-semibold text-text dark:text-hanafuda-cream hover:bg-accent/90 bg-accent dark:bg-hanafuda-gold shadow-xs ring-1 ring-inset ring-border;
  transition: all 0.2s ease-in-out;

  [disabled]:is(&, .sec-btn, .action-button) {
    @apply bg-gray-300 dark:bg-gray-600 text-gray-400 cursor-not-allowed ring-0 transform-none hover:ring-0;
  }
}

@utility sec-btn {
  @apply rounded-xs inline-flex justify-center items-center bg-surface hover:bg-surface/90 px-4 py-2 font-semibold text-text shadow-xs ring-1 ring-inset ring-border;
  transition: all 0.2s ease-in-out;

  [disabled]:is(.pri-btn, &, .action-button) {
    @apply bg-gray-300 dark:bg-gray-600 text-gray-400 cursor-not-allowed ring-0 transform-none hover:ring-0;
  }
}

@utility action-button {
  @apply px-6 py-2 block mx-auto mt-2 text-xl text-text font-bold bg-background ring-2 ring-border shadow-xs hover:ring-primary transition-all duration-200 rounded-xs min-w-[150px];

  [disabled]:is(.pri-btn, .sec-btn, &) {
    @apply bg-gray-300 dark:bg-gray-600 text-gray-400 cursor-not-allowed ring-0 transform-none hover:ring-0;
  }
}

@utility game-ui-btn {
  @apply flex items-center gap-2 px-2 py-2 rounded-lg transition-all duration-300 bg-black/20 dark:bg-white/10 backdrop-blur-xs border border-white/20 hover:bg-black/30 dark:hover:bg-white/20 hover:scale-105 shadow-lg hover:shadow-xl;
}

@utility staged {
  animation: fadeRight 300ms ease-in-out 100ms forwards;
}

@utility no-scrollbar {
  &::-webkit-scrollbar {
    display: none;
  }
  -ms-overflow-style: none;
  scrollbar-width: none;
}

@layer base {
  /* Hanafuda Color Palette CSS Variables */
  .dark {
    /* Primary and accent colors for dark mode */
    --color-primary: hsl(10 100% 68%); /* lighter coral for dark bg */
    --color-accent: hsl(45 100% 77%); /* soft, light gold */

    /* Purple accent (petals) */
    --color-purple: hsl(270 45% 74%); /* lighter muted purple */

    /* Green accent (leaves) */
    --color-green: hsl(150 45% 70%); /* lighter, soft green */

    /* Sakura variants for dark mode */
    --color-sakura: hsl(328 77% 42%); /* deep pink */
    --color-sakura-light: hsl(330 87% 82%); /* same lighter sakura */
    --color-sakura-dark: hsl(330 82% 60%); /* original sakura for contrast */

    /* Natural, warm backgrounds for dark mode */
    --color-background: hsl(15 15% 8%); /* deep brown-black */
    --color-surface: hsl(30 10% 12%); /* dark, warm surface */
    --color-border: hsl(35 10% 39%); /* muted, warm border */
    --color-button: hsl(35 10% 39%); /* muted, warm button */

    /* Text colors for dark mode */
    --color-text: hsl(25 35% 93%); /* warm, light text */
    --color-text-secondary: hsl(
      25 20% 74%
    ); /* lighter for better contrast against dark backgrounds */

    /* Game-specific colors for dark mode */
    --color-hanafuda-red: hsl(10 100% 68%); /* lighter coral */
    --color-hanafuda-gold: hsl(45 100% 77%); /* soft, light gold */
    --color-hanafuda-cream: hsl(15 15% 8%); /* dark background */
    --color-hanafuda-brown: hsl(25 20% 69%); /* lighter brown for contrast */
    --color-hanafuda-purple: hsl(270 45% 74%); /* purple accent */
    --color-hanafuda-green: hsl(150 45% 70%); /* green accent */
  }

  :root {
    overscroll-behavior: none;

    /* Shadcn colors */
    --background: 0 0% 100%;
    --foreground: 20 14.3% 4.1%;
    --card: 0 0% 100%;
    --card-foreground: 20 14.3% 4.1%;
    --popover: 0 0% 100%;
    --popover-foreground: 20 14.3% 4.1%;
    --primary: 24 9.8% 10%;
    --primary-foreground: 60 9.1% 97.8%;
    --secondary: 60 4.8% 95.9%;
    --secondary-foreground: 24 9.8% 10%;
    --muted: 60 4.8% 95.9%;
    --muted-foreground: 25 5.3% 44.7%;
    --accent: 60 4.8% 95.9%;
    --accent-foreground: 24 9.8% 10%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 60 9.1% 97.8%;
    --border: 20 5.9% 90%;
    --input: 20 5.9% 90%;
    --ring: 20 14.3% 4.1%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;
  }

  .dark {
    /* Shadcn colors for dark mode */
    --background: 20 14.3% 4.1%;
    --foreground: 60 9.1% 97.8%;
    --card: 20 14.3% 4.1%;
    --card-foreground: 60 9.1% 97.8%;
    --popover: 20 14.3% 4.1%;
    --popover-foreground: 60 9.1% 97.8%;
    --primary: 60 9.1% 97.8%;
    --primary-foreground: 24 9.8% 10%;
    --secondary: 12 6.5% 15.1%;
    --secondary-foreground: 60 9.1% 97.8%;
    --muted: 12 6.5% 15.1%;
    --muted-foreground: 24 5.4% 63.9%;
    --accent: 12 6.5% 15.1%;
    --accent-foreground: 60 9.1% 97.8%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 60 9.1% 97.8%;
    --border: 12 6.5% 15.1%;
    --input: 12 6.5% 15.1%;
    --ring: 24 5.7% 82.9%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }

  body {
    background-color: var(--color-background);
    --card-height: 140px;
    --card-aspect: 2/3;
    --table-grid-rows: calc(var(--card-height) / 1.5) 1fr calc(var(--card-height) * 2) 1fr
      var(--card-height);
    --landscape-grid-rows: repeat(3, max-content);
    min-width: 320px;
    max-height: 100vh;
    max-height: 100dvh;
    font-family: Rubik, sans-serif;
  }

  * {
    scrollbar-width: 0.3rem;
  }

  *::-webkit-scrollbar {
    width: 0.3rem;
    height: 0.3rem;
    @apply bg-gray-50/20 dark:bg-gray-700/50 rounded-xs;
  }

  *::-webkit-scrollbar-thumb {
    width: 0.3rem;
    height: 0.3rem;
    @apply bg-gray-400 dark:bg-gray-300 rounded-xs;
  }
}

@keyframes fadeRight {
  to {
    translate: 8px 0;
    opacity: 0;
  }
}

@utility animated-cards-container {
  /* // Outer wrapper for all cards */
  position: relative;
  /* // Get control of the positioning */
  margin: 50px auto;
  /* // Centers it on page */
  height: 100px;
  /* // height of each card */
  aspect-ratio: var(--card-aspect);
  font-size: 30px;
  /* //size of number */
  line-height: 38px;
  /* //affects vert position of number */
  font-weight: bold;
  /* //font weight */

  .animated-card {
    /* // Common styles for all cards */
    position: absolute;
    /* //Position all cards on top of each other */
    width: 100%;
    /* //Expand to fill the parent's width */
    height: 100%;
    /* //Expand to fill the parent's height */
    /* animation-iteration-count: infinite; */
    /* animation-direction: alternate-reverse; */
    overflow: hidden;
    animation-fill-mode: forwards;
    animation-duration: 2s;
  }

  .looping {
    height: 60;

    .animated-card {
      /* //Expand to fill the parent's height */
      animation-iteration-count: infinite;
      animation-direction: alternate-reverse;
      animation-fill-mode: unset;
    }
  }

  p {
    /* // style and position the message below */
    font-size: 0.5em;
    position: absolute;
    bottom: -45px;
    left: -13px;
    margin: 0;
  }

  /* // Move and rotate each card */
  /* // Translate moves x and sometimes y */
  .one {
    animation-name: anim-one;
  }

  .two {
    animation-name: anim-two;
  }

  .three {
    animation-name: anim-three;
  }

  .four {
    animation-name: anim-five;
  }

  .five {
    animation-name: anim-eight;
  }

  @media (prefers-reduced-motion: reduce) {
    .animated-card {
      animation-duration: 0s;
    }
    .one {
      animation-name: none;
      transform: translate(-30px, 5px) rotate(-45deg);
    }
    .two {
      animation-name: none;
      transform: translate(-15px) rotate(-25deg);
    }
    .three {
      animation-name: none;
      transform: rotate(-5deg);
    }
    .four {
      animation-name: none;
      transform: translate(15px, 5px) rotate(15deg);
    }
    .five {
      animation-name: none;
      transform: translate(28px, 14px) rotate(35deg);
    }
  }
}

@keyframes anim-one {
  from {
    transform: translate(0) rotate(0deg);
  }

  to {
    transform: translate(-30px, 5px) rotate(-45deg);
  }

  /* to {
      transform: translate(0) rotate(0deg);
    } */
}
@keyframes anim-two {
  from {
    transform: translate(0) rotate(0deg);
  }

  to {
    transform: translate(-15px) rotate(-25deg);
  }

  /* to {
      transform: translate(0) rotate(0deg);
    } */
}
@keyframes anim-five {
  from {
    transform: translate(0) rotate(0deg);
  }

  to {
    transform: translate(15px, 5px) rotate(15deg);
  }

  /* to {
            transform: translate(0) rotate(0deg);
          } */
}

@keyframes anim-three {
  from {
    transform: translate(0) rotate(0deg);
  }

  to {
    transform: rotate(-5deg);
  }

  /* to {
            transform: translate(0) rotate(0deg);
          } */
}
@keyframes anim-eight {
  from {
    transform: translate(0) rotate(0deg);
  }

  to {
    transform: translate(28px, 14px) rotate(35deg);
  }

  /* to {
      transform: translate(0) rotate(0deg);
    } */
}
